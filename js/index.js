((t,e)=>{"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.WEBPACK_GLOBAL=e():t.WEBPACK_GLOBAL=e()})(this,()=>{{let p="data-popup",i="data-popup-wrapper",n="data-popup-id",s="active",r="no-scroll",e={duration:200,historyPopup:!0};class o{_documentBody=document.body;_widthScrollbar=window.innerWidth-document.documentElement.clientWidth;_allButtonsOpen=[];_allPopups=new Map;_allElementOffsetPadding=null;_popupsHistory=new Set;_currentActiveId=null;_currentActive=null;_popupOverlay=null;constructor(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this._options={...e,...t},this._init()}getActivePopupId=()=>this._currentActiveId;getActivePopup=()=>this._currentActive;getAllPopups=()=>this._allPopups;addPopup=t=>{var e,o,s;t&&(this._allPopups.get(t)?console.log(`Popup с id: "${t}", уже существует!`):(e=document.querySelectorAll(`[${n}=${t}]`),o=(s=document.querySelector(`#${t}[${p}]`))&&s.querySelectorAll(`[${n}]`),s&&(this._setPopupInMap(s),s=this._allPopups.get(t))&&(e.forEach(t=>{this._allButtonsOpen.push(t),this._setEventButtonOpen(t)}),o.forEach(t=>{this._allButtonsOpen.push(t),this._setEventButtonOpen(t)}),this._setEventPopup(t,s))))};open=t=>{"string"==typeof t&&this._open(t)};close=(()=>{var t=this;return function(){t._currentActiveId&&(0<arguments.length&&void 0!==arguments[0]&&!arguments[0]||t._popupsHistory.clear(),t._close(t._currentActiveId))}})();_setPopupInMap=t=>{var e,o,s,p;t&&(e=t.id,o=t.querySelector(`[${i}]`),s=t.querySelectorAll("[data-popup-close]"),p=t.querySelector("[data-popup-body]"),e)&&o&&p&&this._allPopups.set(e,{popup:t,wrapper:o,body:p,buttonsClose:[...s]})};_createPopupOverlay=()=>{var t=document.createElement("div");t.classList="popup-overlay",t.setAttribute("data-popup-overlay",""),this._popupOverlay=t,this._documentBody.append(t)};_setElementOffsetPadding=()=>{this._allElementOffsetPadding=document.querySelectorAll("[data-popup-offset-padding]"),this._allElementOffsetPadding.forEach(t=>{var e=window.getComputedStyle(t).position;"fixed"!==e&&"absolute"!==e||this._setElementPaddingRight(t)})};_setElementPaddingRight=t=>{t&&(t.style.paddingRight=this._widthScrollbar+"px")};_removeElementPaddingRight=t=>{t&&t.style.removeProperty("padding-right")};_addToHistory=t=>{this._options.historyPopup&&t&&(this._popupsHistory.has(t)&&this._popupsHistory.delete(t),this._popupsHistory.add(t))};_callFromHistory=()=>{var t;return!this._options.historyPopup||(t=(t=Array.from(this._popupsHistory))[t.length-2],this._popupsHistory.delete(t),t?(this._showPopup(t),!1):(this._popupsHistory.clear(),!0))};_ignoreHistory=t=>{t.hasAttribute("data-popup-ignore-history")&&this._popupsHistory.clear()};_showPopup=t=>{var e,o=this._allPopups.get(t);o&&this._currentActiveId!==t&&(this._currentActive&&this._currentActive.classList.remove(s),{popup:o,wrapper:e}=o,this._currentActiveId=t,(this._currentActive=o).classList.add(s),this._popupOverlay.classList.add(s),this._documentBody.classList.add(r),this._setElementPaddingRight(this._documentBody),o.clientHeight>=e.scrollHeight&&this._setElementPaddingRight(o),this._setElementOffsetPadding())};_open=t=>{this._allPopups.has(t)&&this._currentActiveId!==t&&(this._showPopup(t),this._addToHistory(t))};_close=e=>{e=this._allPopups.get(e);if(e){let t=e.popup;t.classList.remove(s),this._callFromHistory()&&(this._popupOverlay.classList.remove(s),setTimeout(()=>{this._documentBody.classList.remove(r),this._removeElementPaddingRight(this._documentBody),this._removeElementPaddingRight(t),this._allElementOffsetPadding.forEach(t=>{this._removeElementPaddingRight(t)}),this._currentActiveId=this._currentActive=null},this._options.duration))}};_setEventButtonOpen=t=>{if(t){let e=t.getAttribute(n);e&&this._allPopups.has(e)&&t.addEventListener("click",t=>{t.preventDefault(),this._open(e)})}};_setEventPopup=(o,t)=>{var e;o&&t&&({popup:t,buttonsClose:e}=t,e.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),this._ignoreHistory(e),this._close(o)})}),t.addEventListener("click",t=>{t=t.target;t.hasAttribute(i)&&this._close(o)}))};_events=()=>{this._allButtonsOpen.forEach(this._setEventButtonOpen);for(var[t,e]of this._allPopups.entries())this._setEventPopup(t,e);window.addEventListener("keydown",t=>{"Escape"===t.key&&this._close(this._currentActiveId)})};_init=()=>{var t=document.querySelectorAll(`[${n}]`),e=document.querySelectorAll(`[${p}]`);e.length&&(this._createPopupOverlay(),this._allButtonsOpen=[...t],e.forEach(this._setPopupInMap),this._events())}}return document.addEventListener("DOMContentLoaded",t=>{var e=new o;document.body.insertAdjacentHTML("beforeend",'\n<div id="id-popup-03" class="popup" data-popup>\n  <div class="popup__wrapper" data-popup-wrapper>\n    <div class="popup__body" data-popup-body>\n\n      <span data-popup-id="id-popup-01">POPUP 01</span>\n\n      <p class="popup__text">\n        <strong>Popup №3 через JS</strong> <br />\n        Далеко-далеко за словесными горами в стране гласных и согласных живут\n        рыбные тексты.\n      </p>\n    </div>\n  </div>\n</div>\n'),e.addPopup("id-popup-03")}),{}}});